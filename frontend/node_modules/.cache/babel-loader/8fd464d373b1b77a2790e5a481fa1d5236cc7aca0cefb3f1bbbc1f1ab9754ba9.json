{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./App.css';import Header from'./components/Header';import PredictionPanel from'./components/PredictionPanel';import StocksList from'./components/StocksList';import LoadingSpinner from'./components/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[marketData,setMarketData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[lastUpdated,setLastUpdated]=useState(null);const fetchMarketData=async()=>{try{setLoading(true);const response=await axios.get('/api/market-data');setMarketData(response.data);setLastUpdated(new Date());setLoading(false);}catch(err){console.error('获取市场数据失败:',err);setError('获取市场数据失败，请刷新页面重试');setLoading(false);}};useEffect(()=>{fetchMarketData();// 设置每分钟自动刷新\nconst interval=setInterval(()=>{fetchMarketData();},60000);return()=>clearInterval(interval);},[]);const handleRefresh=()=>{fetchMarketData();};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Header,{onRefresh:handleRefresh,lastUpdated:lastUpdated}),loading&&!marketData?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(LoadingSpinner,{}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u52A0\\u8F7D\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"})]}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"error-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRefresh,className:\"refresh-button\",children:\"\\u91CD\\u8BD5\"})]}):marketData&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"main\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(PredictionPanel,{predictionData:marketData.prediction,timestamp:marketData.timestamp}),/*#__PURE__*/_jsx(StocksList,{stocks:marketData.stocks})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","Header","PredictionPanel","StocksList","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","marketData","setMarketData","loading","setLoading","error","setError","lastUpdated","setLastUpdated","fetchMarketData","response","get","data","Date","err","console","interval","setInterval","clearInterval","handleRefresh","className","children","onRefresh","onClick","predictionData","prediction","timestamp","stocks"],"sources":["/Users/Wezhang/workspace/Next-BigA/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport Header from './components/Header';\nimport PredictionPanel from './components/PredictionPanel';\nimport StocksList from './components/StocksList';\nimport LoadingSpinner from './components/LoadingSpinner';\n\nfunction App() {\n  const [marketData, setMarketData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [lastUpdated, setLastUpdated] = useState(null);\n\n  const fetchMarketData = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get('/api/market-data');\n      setMarketData(response.data);\n      setLastUpdated(new Date());\n      setLoading(false);\n    } catch (err) {\n      console.error('获取市场数据失败:', err);\n      setError('获取市场数据失败，请刷新页面重试');\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchMarketData();\n    \n    // 设置每分钟自动刷新\n    const interval = setInterval(() => {\n      fetchMarketData();\n    }, 60000);\n    \n    return () => clearInterval(interval);\n  }, []);\n\n  const handleRefresh = () => {\n    fetchMarketData();\n  };\n\n  return (\n    <div className=\"app\">\n      <Header onRefresh={handleRefresh} lastUpdated={lastUpdated} />\n      \n      {loading && !marketData ? (\n        <div className=\"loading-container\">\n          <LoadingSpinner />\n          <p>加载中，请稍候...</p>\n        </div>\n      ) : error ? (\n        <div className=\"error-container\">\n          <p className=\"error-message\">{error}</p>\n          <button onClick={handleRefresh} className=\"refresh-button\">\n            重试\n          </button>\n        </div>\n      ) : marketData && (\n        <>\n          <main className=\"main-content\">\n            <PredictionPanel predictionData={marketData.prediction} timestamp={marketData.timestamp} />\n            <StocksList stocks={marketData.stocks} />\n          </main>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}